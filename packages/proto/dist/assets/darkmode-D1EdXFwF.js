function s(){const o=document.body,t=document.getElementById("dark-mode-toggle");if(!t||!o)return;const c=t.closest("label")||t.parentElement||t,r=e=>{e.stopPropagation();const d=!!e.target.checked,n=new CustomEvent("darkmode:toggle",{bubbles:!0,detail:{checked:d}});c.dispatchEvent(n)};c.addEventListener("change",r);const l=e=>{const d=!!(e!=null&&e.detail&&e.detail.checked);o.classList.toggle("dark-mode",d);try{localStorage.setItem("prefers-darkmode",String(d))}catch{}};o.addEventListener("darkmode:toggle",l);let a=!1;try{const e=localStorage.getItem("prefers-darkmode");(e==="true"||e==="false")&&(a=e==="true")}catch{}t.checked=a,o.classList.toggle("dark-mode",a)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s();
